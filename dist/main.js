/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";let t=()=>{};let e,i,n={};function s(t,e){n[t]=n[t]||[],n[t].push(e)}function h(t,...e){(n[t]||[]).map((t=>t(...e)))}let o={get:(e,i)=>"_proxy"==i||t};function r(){return e}function a(){return i}function c(t,e,i){return Math.min(Math.max(t,i),e)}class d{constructor(t=0,e=0,i={}){null!=t.x?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),i._c&&(this.clamp(i._a,i._b,i._d,i._e),this.x=t,this.y=e)}set(t){this.x=t.x,this.y=t.y}add(t){return new d(this.x+t.x,this.y+t.y,this)}subtract(t){return new d(this.x-t.x,this.y-t.y,this)}scale(t){return new d(this.x*t,this.y*t)}normalize(t=this.length()||1){return new d(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}length(){return Math.hypot(this.x,this.y)}distance(t){return Math.hypot(this.x-t.x,this.y-t.y)}angle(t){return Math.acos(this.dot(t)/(this.length()*t.length()))}direction(){return Math.atan2(this.y,this.x)}clamp(t,e,i,n){this._c=!0,this._a=t,this._b=e,this._d=i,this._e=n}get x(){return this._x}get y(){return this._y}set x(t){this._x=this._c?c(this._a,this._d,t):t}set y(t){this._y=this._c?c(this._b,this._e,t):t}}function l(){return new d(...arguments)}class u{constructor(t){return this.init(t)}init(t={}){this.position=l(),this.velocity=l(),this.acceleration=l(),this.ttl=1/0,Object.assign(this,t)}update(t){this.advance(t)}advance(t){let e=this.acceleration;t&&(e=e.scale(t)),this.velocity=this.velocity.add(e);let i=this.velocity;t&&(i=i.scale(t)),this.position=this.position.add(i),this._pc(),this.ttl--}get dx(){return this.velocity.x}get dy(){return this.velocity.y}set dx(t){this.velocity.x=t}set dy(t){this.velocity.y=t}get ddx(){return this.acceleration.x}get ddy(){return this.acceleration.y}set ddx(t){this.acceleration.x=t}set ddy(t){this.acceleration.y=t}isAlive(){return this.ttl>0}_pc(){}}class p extends u{init({width:t=0,height:e=0,context:i=a(),render:n=this.draw,update:h=this.advance,children:o=[],anchor:r={x:0,y:0},opacity:c=1,rotation:d=0,scaleX:l=1,scaleY:u=1,...p}={}){this._c=[],super.init({width:t,height:e,context:i,anchor:r,opacity:c,rotation:d,scaleX:l,scaleY:u,...p}),this._di=!0,this._uw(),this.addChild(o),this._rf=n,this._uf=h,s("init",(()=>{this.context??=a()}))}update(t){this._uf(t),this.children.map((e=>e.update&&e.update(t)))}render(){let t=this.context;t.save(),(this.x||this.y)&&t.translate(this.x,this.y),this.rotation&&t.rotate(this.rotation),1==this.scaleX&&1==this.scaleY||t.scale(this.scaleX,this.scaleY);let e=-this.width*this.anchor.x,i=-this.height*this.anchor.y;(e||i)&&t.translate(e,i),this.context.globalAlpha=this.opacity,this._rf(),(e||i)&&t.translate(-e,-i),this.children.map((t=>t.render&&t.render())),t.restore()}draw(){}_pc(){this._uw(),this.children.map((t=>t._pc()))}get x(){return this.position.x}get y(){return this.position.y}set x(t){this.position.x=t,this._pc()}set y(t){this.position.y=t,this._pc()}get width(){return this._w}set width(t){this._w=t,this._pc()}get height(){return this._h}set height(t){this._h=t,this._pc()}_uw(){if(!this._di)return;let{_wx:t=0,_wy:e=0,_wo:i=1,_wr:n=0,_wsx:s=1,_wsy:h=1}=this.parent||{};this._wx=this.x,this._wy=this.y,this._ww=this.width,this._wh=this.height,this._wo=i*this.opacity,this._wsx=s*this.scaleX,this._wsy=h*this.scaleY,this._wx=this._wx*s,this._wy=this._wy*h,this._ww=this.width*this._wsx,this._wh=this.height*this._wsy,this._wr=n+this.rotation;let{x:o,y:r}=function(t,e){let i=Math.sin(e),n=Math.cos(e);return{x:t.x*n-t.y*i,y:t.x*i+t.y*n}}({x:this._wx,y:this._wy},n);this._wx=o,this._wy=r,this._wx+=t,this._wy+=e}get world(){return{x:this._wx,y:this._wy,width:this._ww,height:this._wh,opacity:this._wo,rotation:this._wr,scaleX:this._wsx,scaleY:this._wsy}}set children(t){this.removeChild(this._c),this.addChild(t)}get children(){return this._c}addChild(...e){e.flat().map((e=>{this.children.push(e),e.parent=this,e._pc=e._pc||t,e._pc()}))}removeChild(...t){t.flat().map((t=>{(function(t,e){let i=t.indexOf(e);if(-1!=i)return t.splice(i,1),!0})(this.children,t)&&(t.parent=null,t._pc())}))}get opacity(){return this._opa}set opacity(t){this._opa=c(0,1,t),this._pc()}get rotation(){return this._rot}set rotation(t){this._rot=t,this._pc()}setScale(t,e=t){this.scaleX=t,this.scaleY=e}get scaleX(){return this._scx}set scaleX(t){this._scx=t,this._pc()}get scaleY(){return this._scy}set scaleY(t){this._scy=t,this._pc()}}class f extends p{init({image:t,width:e=(t?t.width:void 0),height:i=(t?t.height:void 0),...n}={}){super.init({image:t,width:e,height:i,...n})}get animations(){return this._a}set animations(t){let e,i;for(e in this._a={},t)this._a[e]=t[e].clone(),i=i||this._a[e];this.currentAnimation=i,this.width=this.width||i.width,this.height=this.height||i.height}playAnimation(t){this.currentAnimation?.stop(),this.currentAnimation=this.animations[t],this.currentAnimation.start()}advance(t){super.advance(t),this.currentAnimation?.update(t)}draw(){this.image&&this.context.drawImage(this.image,0,0,this.image.width,this.image.height),this.currentAnimation&&this.currentAnimation.render({x:0,y:0,width:this.width,height:this.height,context:this.context}),this.color&&(this.context.fillStyle=this.color,this.context.fillRect(0,0,this.width,this.height))}}function g(){return new f(...arguments)}let w=new WeakMap,y={},x={},_={0:"left",1:"middle",2:"right"};function m(t,e){let{x:i,y:n,width:s,height:h}=function(t){let{x:e=0,y:i=0,width:n,height:s}=t.world||t;return t.mapwidth&&(n=t.mapwidth,s=t.mapheight),t.anchor&&(e-=n*t.anchor.x,i-=s*t.anchor.y),n<0&&(e+=n,n*=-1),s<0&&(i+=s,s*=-1),{x:e,y:i,width:n,height:s}}(t);do{i-=t.sx||0,n-=t.sy||0}while(t=t.parent);let o=e.x-Math.max(i,Math.min(e.x,i+s)),r=e.y-Math.max(n,Math.min(e.y,n+h));return o*o+r*r<e.radius*e.radius}function v(t,e){return parseFloat(t.getPropertyValue(e))||0}function b(t){let e=null!=t.button?_[t.button]:"left";x[e]=!0,C(t,"onDown")}function E(t){let e=null!=t.button?_[t.button]:"left";x[e]=!1,C(t,"onUp")}function k(t){C(t,"onOver")}function A(t){w.get(t.target)._oo=null,x={}}function M(t,e,i){let n=function(t){let e=t._lf.length?t._lf:t._cf;for(let i=e.length-1;i>=0;i--){let n=e[i];if(n.collidesWithPointer?n.collidesWithPointer(t):m(n,t))return n}}(t);n&&n[e]&&n[e](i),y[e]&&y[e](i,n),"onOver"==e&&(n!=t._oo&&t._oo&&t._oo.onOut&&t._oo.onOut(i),t._oo=n)}function C(t,e){t.preventDefault();let i=t.target,n=w.get(i),{scaleX:s,scaleY:o,offsetX:r,offsetY:a}=function(t){let{canvas:e,_s:i}=t,n=e.getBoundingClientRect(),s="none"!=i.transform?i.transform.replace("matrix(","").split(","):[1,1,1,1],h=parseFloat(s[0]),o=parseFloat(s[3]),r=(v(i,"border-left-width")+v(i,"border-right-width"))*h,a=(v(i,"border-top-width")+v(i,"border-bottom-width"))*o,c=(v(i,"padding-left")+v(i,"padding-right"))*h,d=(v(i,"padding-top")+v(i,"padding-bottom"))*o;return{scaleX:(n.width-r-c)/e.width,scaleY:(n.height-a-d)/e.height,offsetX:n.left+(v(i,"border-left-width")+v(i,"padding-left"))*h,offsetY:n.top+(v(i,"border-top-width")+v(i,"padding-top"))*o}}(n);t.type.includes("touch")?(Array.from(t.touches).map((({clientX:t,clientY:e,identifier:i})=>{let h=n.touches[i];h||(h=n.touches[i]={start:{x:(t-r)/s,y:(e-a)/o}},n.touches.length++),h.changed=!1})),Array.from(t.changedTouches).map((({clientX:i,clientY:c,identifier:d})=>{let l=n.touches[d];l.changed=!0,l.x=n.x=(i-r)/s,l.y=n.y=(c-a)/o,M(n,e,t),h("touchChanged",t,n.touches),"onUp"==e&&(delete n.touches[d],n.touches.length--,n.touches.length||h("touchEnd"))}))):(n.x=(t.clientX-r)/s,n.y=(t.clientY-a)/o,M(n,e,t))}function Y({radius:t=5,canvas:e=r()}={}){let i=w.get(e);if(!i){let n=window.getComputedStyle(e);i={x:0,y:0,radius:t,touches:{length:0},canvas:e,_cf:[],_lf:[],_o:[],_oo:null,_s:n},w.set(e,i)}return e.addEventListener("mousedown",b),e.addEventListener("touchstart",b),e.addEventListener("mouseup",E),e.addEventListener("touchend",E),e.addEventListener("touchcancel",E),e.addEventListener("blur",A),e.addEventListener("mousemove",k),e.addEventListener("touchmove",k),i._t||(i._t=!0,s("tick",(()=>{i._lf.length=0,i._cf.map((t=>{i._lf.push(t)})),i._cf.length=0}))),i}function L(...t){t.flat().map((t=>{let e=t.context?t.context.canvas:r(),i=w.get(e);if(!i)throw new ReferenceError("Pointer events not initialized for the objects canvas");t._r||(t._r=t.render,t.render=function(){i._cf.push(this),this._r()},i._o.push(t))}))}function O(t){let e=t.canvas;t.clearRect(0,0,e.width,e.height)}let X=[],S={},D={},V={0:"south",1:"east",2:"west",3:"north",4:"leftshoulder",5:"rightshoulder",6:"lefttrigger",7:"righttrigger",8:"select",9:"start",10:"leftstick",11:"rightstick",12:"dpadup",13:"dpaddown",14:"dpadleft",15:"dpadright"};function P(t){X[t.gamepad.index]={pressedButtons:{},axes:{}}}function B(t){delete X[t.gamepad.index]}function I(){X.map((t=>{t.pressedButtons={},t.axes={}}))}function F(){let t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];for(let e=0;e<t.length;e++){let i=t[e];if(!i)continue;i.buttons.map(((t,e)=>{let n=V[e],{pressed:s}=t,{pressedButtons:h}=X[i.index],o=h[n];!o&&s?[S[i.index],S].map((e=>{e?.[n]?.(i,t,n)})):o&&!s&&[D[i.index],D].map((e=>{e?.[n]?.(i,t,n)})),h[n]=s}));let{axes:n}=X[i.index];n.leftstickx=i.axes[0],n.leftsticky=i.axes[1],n.rightstickx=i.axes[2],n.rightsticky=i.axes[3]}}let G,j={},R=!1,U={swipe:{touches:1,threshold:10,touchend({0:t}){let e=t.x-t.start.x,i=t.y-t.start.y,n=Math.abs(e),s=Math.abs(i);if(!(n<this.threshold&&s<this.threshold))return n>s?e<0?"left":"right":i<0?"up":"down"}},pinch:{touches:2,threshold:2,touchstart({0:t,1:e}){this.prevDist=Math.hypot(t.x-e.x,t.y-e.y)},touchmove({0:t,1:e}){let i=Math.hypot(t.x-e.x,t.y-e.y);if(Math.abs(i-this.prevDist)<this.threshold)return;let n=i>this.prevDist?"out":"in";return this.prevDist=i,n}}};let W={},q={},N={},z={Enter:"enter",Escape:"esc",Space:"space",ArrowLeft:"arrowleft",ArrowUp:"arrowup",ArrowRight:"arrowright",ArrowDown:"arrowdown"};function T(e=t,i){e._pd&&i.preventDefault(),e(i)}function K(t){let e=z[t.code],i=W[e];N[e]=!0,T(i,t)}function $(t){let e=z[t.code],i=q[e];N[e]=!1,T(i,t)}function H(){N={}}function J(t,e){return Object.values(e).includes(t)}function Q(t={}){!function(){let t;for(t=0;t<26;t++)z["Key"+String.fromCharCode(t+65)]=String.fromCharCode(t+97);for(t=0;t<10;t++)z["Digit"+t]=z["Numpad"+t]=""+t;window.addEventListener("keydown",K),window.addEventListener("keyup",$),window.addEventListener("blur",H)}();let e=Y(t.pointer);return R||(R=!0,s("touchChanged",((t,e)=>{Object.keys(U).map((i=>{let n,s=U[i];(!G||G==i)&&e.length==s.touches&&[...Array(e.length).keys()].every((t=>e[t]))&&(n=s[t.type]?.(e)??"")&&j[i+n]&&(G=i,j[i+n](t,e))}))})),s("touchEnd",(()=>{G=0}))),window.addEventListener("gamepadconnected",P),window.addEventListener("gamepaddisconnected",B),window.addEventListener("blur",I),s("tick",F),{pointer:e}}function Z(t,e,{gamepad:i,key:n}={}){[].concat(t).map((t=>{if(J(t,V))!function(t,e,{gamepad:i,handler:n="gamepaddown"}={}){let s="gamepaddown"==n?S:D;[].concat(t).map((t=>{isNaN(i)?s[t]=e:(s[i]=s[i]||{},s[i][t]=e)}))}(t,e,i);else if(s=t,Object.keys(U).some((t=>s.startsWith(t))))!function(t,e){[].concat(t).map((t=>{j[t]=e}))}(t,e);else if(J(t,z))!function(t,e,{handler:i="keydown",preventDefault:n=!0}={}){let s="keydown"==i?W:q;e._pd=n,[].concat(t).map((t=>s[t]=e))}(t,e,n);else{if(!["down","up"].includes(t))throw new TypeError(`"${t}" is not a valid input name`);!function(t,e){let i=t[0].toUpperCase()+t.substr(1);y["on"+i]=e}(t,e)}var s}))}let{canvas:tt}=function(t,{contextless:n=!1}={}){if(e=document.getElementById(t)||t||document.querySelector("canvas"),n&&(e=e||new Proxy({},o)),!e)throw Error("You must provide a canvas element for the game");return i=e.getContext("2d")||new Proxy({},o),i.imageSmoothingEnabled=!1,h("init"),{canvas:e,context:i}}();const et=document.getElementById("cauldron-frame"),it=et.getContext("2d");it.imageSmoothingEnabled=!1;const nt=document.getElementById("cauldron-water"),st=nt.getContext("2d"),ht=new Image;ht.src="./assets/cauldron.png",ht.onload=()=>{it.drawImage(ht,0,0,et.width,et.height),st.beginPath(),st.arc(nt.width/2,nt.height/2,nt.width/2.7,0,2*Math.PI),st.fillStyle="#aa4d8d",st.fill(),Y(),Q();var e=0;let i=g({x:238,y:70,color:"purple",width:8,height:30}),n=g({temperatureValue:100,x:240,y:10,color:"green",width:4,height:100,update:function(t){this.temperatureValue=this.temperatureValue-10*t,this.height=this.temperatureValue,this.temperatureValue<60||this.temperatureValue>90?this.color="red":this.color="green"}});Z(["space"],(function(t){n.temperatureValue=n.temperatureValue+10,console.log(" *** space pressed ***")}));let o=g({x:28,y:28,color:"#0000ff00",width:100,height:100,onOver:function(){0===e&&(this.color="#ff00ff33")},onOut:function(){0===e&&(e=1),console.log("moving out of left upper",e),this.color="#0000ff00"}}),r=g({x:128,y:28,color:"#0000ff00",width:100,height:100,onOver:function(){1===e&&(this.color="#ff00ff33")},onOut:function(){1===e&&(e=2),console.log("moving out of left upper",e),this.color="#0000ff00"}}),c=g({x:128,y:128,color:"#0000ff00",width:100,height:100,onOver:function(){2===e&&(this.color="#ff00ff33")},onOut:function(){2===e&&(e=3),console.log("moving out of left upper",e),this.color="#0000ff00"}}),d=g({x:28,y:128,color:"#0000ff00",width:100,height:100,onOver:function(){this.color=3===e?"#ff00ff33":"#0000ff00"},onOut:function(){3===e&&(e=0),console.log("moving out of left upper",e),this.color="#0000ff00"}});L(o),L(r),L(d),L(c),function({fps:e=60,clearCanvas:i=!0,update:n=t,render:o,context:r=a(),blur:c=!1}={}){if(!o)throw Error("You must provide a render() function");let d,l,u,p,f,g=0,w=1e3/e,y=1/e,x=i?O:t,_=!0;function m(){if(l=requestAnimationFrame(m),_&&(u=performance.now(),p=u-d,d=u,!(p>1e3))){for(h("tick"),g+=p;g>=w;)f.update(y),g-=w;x(f.context),f.render()}}return c||(window.addEventListener("focus",(()=>{_=!0})),window.addEventListener("blur",(()=>{_=!1}))),s("init",(()=>{f.context??=a()})),f={update:n,render:o,isStopped:!0,context:r,start(){d=performance.now(),this.isStopped=!1,requestAnimationFrame(m)},stop(){this.isStopped=!0,cancelAnimationFrame(l)},_frame:m,set _last(t){d=t}},f}({update:function(t){o.update(),r.update(),d.update(),c.update(),n.update(t)},render:function(){o.render(),r.render(),d.render(),c.render(),i.render(),n.render()}}).start()}})();